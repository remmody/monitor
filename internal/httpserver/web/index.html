<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>System Monitor</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
      :root {
        --mx-bg: #070f0a;
        --mx-panel: #0b1220;
        --mx-green: #16a34a;
        --mx-green-2: #22c55e;
        --mx-green-3: #34d399;
        --mx-grid: rgba(34, 197, 94, 0.06);
        --mx-grid-2: rgba(34, 197, 94, 0.04);
        --mx-border: rgba(34, 197, 94, 0.25);
      }

      * {
        box-sizing: border-box;
        scrollbar-color: var(--mx-green-2) var(--mx-panel);
        scrollbar-width: thin;
      }

      *::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      *::-webkit-scrollbar-track {
        background: var(--mx-panel);
      }
      *::-webkit-scrollbar-thumb {
        background: linear-gradient(180deg, var(--mx-green), var(--mx-green-2));
        border-radius: 8px;
        border: 2px solid var(--mx-panel);
      }

      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
      }

      body {
        background: var(--mx-bg);
        color: #e2e8f0;
        font-family: "Courier New", monospace;
        font-size: clamp(0.75rem, 2vw, 0.875rem);
        line-height: 1.5;
        overflow-x: hidden;
      }

      .container {
        width: 100%;
        max-width: 100vw;
        margin: 0 auto;
        padding: clamp(0.75rem, 3vw, 1.5rem);
      }

      .panel {
        position: relative;
        background: var(--mx-panel);
        border: 1px solid var(--mx-border);
        border-radius: 0.5rem;
        padding: clamp(0.75rem, 3vw, 1rem);
        margin-bottom: clamp(0.75rem, 3vw, 1rem);
        box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.12) inset,
          0 0 24px rgba(34, 197, 94, 0.08);
        overflow: hidden;
        min-height: fit-content;
      }

      .panel::before {
        content: "";
        position: absolute;
        inset: 0;
        background-image: repeating-linear-gradient(
            0deg,
            var(--mx-grid) 0 1px,
            transparent 1px 20px
          ),
          repeating-linear-gradient(
            90deg,
            var(--mx-grid-2) 0 1px,
            transparent 1px 20px
          );
        pointer-events: none;
        border-radius: 0.5rem;
      }

      .panel::after {
        content: "";
        position: absolute;
        inset: 0;
        background: repeating-linear-gradient(
          180deg,
          rgba(16, 185, 129, 0.05) 0 2px,
          transparent 2px 4px
        );
        mix-blend-mode: screen;
        pointer-events: none;
        border-radius: 0.5rem;
      }

      .panel-content {
        position: relative;
        z-index: 1;
        display: flex;
        flex-direction: column;
        gap: clamp(0.5rem, 2vw, 0.75rem);
      }

      .header-flex {
        display: flex;
        flex-wrap: wrap;
        gap: clamp(0.5rem, 2vw, 1rem);
        align-items: center;
      }

      .header-item {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
        min-width: min-content;
      }

      .header-label {
        color: #94a3b8;
        font-size: clamp(0.65rem, 1.5vw, 0.75rem);
      }

      .header-value {
        color: #22c55e;
        font-weight: bold;
        font-size: clamp(0.75rem, 1.8vw, 0.875rem);
      }

      .grid-cols-2 {
        display: grid;
        grid-template-columns: 1fr;
        gap: clamp(0.75rem, 3vw, 1rem);
        margin-bottom: clamp(0.75rem, 3vw, 1rem);
      }

      @media (min-width: 1024px) {
        .grid-cols-2 {
          grid-template-columns: 1fr 1fr;
        }
      }

      h2 {
        font-size: clamp(0.875rem, 2vw, 1rem);
        font-weight: bold;
        color: #cbd5e1;
        text-shadow: 0 0 6px rgba(34, 197, 94, 0.45);
        margin: 0;
        padding: 0;
        line-height: 1.2;
      }

      .title-row {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        gap: 1rem;
        width: 100%;
      }

      .ascii-pre {
        font-family: monospace;
        font-size: clamp(0.6rem, 1.5vw, 0.75rem);
        line-height: 1.45;
        white-space: pre !important;
        overflow-x: auto;
        overflow-y: hidden;
        margin: 0;
        padding: 0;
        min-width: 0;
        min-height: 2rem;
      }

      .bar-g {
        color: #22c55e;
      }
      .bar-y {
        color: #eab308;
      }
      .bar-r {
        color: #ef4444;
      }
      .bar-d {
        color: #475569;
      }

      .table-wrapper {
        width: 100%;
        overflow-x: auto;
        overflow-y: auto;
        min-width: 0;
        isolation: isolate;
      }

      .data-table {
        width: 100%;
        border-collapse: collapse;
        font-size: clamp(0.65rem, 1.5vw, 0.75rem);
        table-layout: fixed;
      }

      .data-table thead {
        background: rgba(11, 18, 32, 0.98);
        color: #c7ffdf;
        position: sticky;
        top: 0;
        z-index: 20;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4),
          inset 0 -2px 0 rgba(34, 197, 94, 0.3);
      }

      .data-table th {
        font-weight: bold;
        text-align: center !important;
        padding: clamp(0.3rem, 0.75vw, 0.5rem) !important;
        border-bottom: 2px solid rgba(34, 197, 94, 0.2);
        white-space: nowrap;
        background: rgba(11, 18, 32, 0.98);
      }

      .data-table td {
        padding: clamp(0.25rem, 0.75vw, 0.4rem);
        border-bottom: 1px solid rgba(34, 197, 94, 0.12);
        vertical-align: middle;
      }

      .data-table tbody tr:nth-child(even) {
        background: rgba(34, 197, 94, 0.03);
      }

      .data-table tbody tr:hover {
        background: rgba(34, 197, 94, 0.08);
        z-index: 1;
      }

      .col-disk {
        width: 40%;
        text-align: left !important;
      }
      .col-disk-read {
        width: 30%;
        text-align: center !important;
      }
      .col-disk-write {
        width: 30%;
        text-align: center !important;
      }

      .col-iface {
        width: 20%;
        text-align: left !important;
      }
      .col-rx {
        width: 14%;
        text-align: center !important;
      }
      .col-tx {
        width: 14%;
        text-align: center !important;
      }
      .col-pkts-rx {
        width: 12%;
        text-align: center !important;
      }
      .col-pkts-tx {
        width: 12%;
        text-align: center !important;
      }
      .col-errs {
        width: 14%;
        text-align: center !important;
      }
      .col-drop {
        width: 14%;
        text-align: center !important;
      }

      .col-sensor {
        width: 40%;
        text-align: left !important;
      }
      .col-temp {
        width: 20%;
        text-align: center !important;
      }
      .col-high {
        width: 20%;
        text-align: center !important;
      }
      .col-crit {
        width: 20%;
        text-align: center !important;
      }

      .col-pid {
        width: 8%;
        text-align: center !important;
      }
      .col-user {
        width: 15%;
        text-align: left !important;
      }
      .col-cpu {
        width: 10%;
        text-align: center !important;
      }
      .col-mem {
        width: 10%;
        text-align: center !important;
      }
      .col-rss {
        width: 15%;
        text-align: center !important;
      }
      .col-thr {
        width: 8%;
        text-align: center !important;
      }
      .col-ni {
        width: 7%;
        text-align: center !important;
      }
      .col-status {
        width: 7%;
        text-align: center !important;
      }
      .col-name {
        width: 20%;
        text-align: left !important;
      }

      .max-height-12 {
        max-height: 12rem;
      }
      .max-height-20 {
        max-height: 20rem;
      }
      .net-io-wrapper {
        max-height: 16rem;
        overflow-y: auto;
        overflow-x: hidden;
        border-radius: 0.5rem;
        border: 1px solid rgba(34, 197, 94, 0.12) inset;
      }

      @media (max-width: 640px) {
        .grid-cols-2 {
          grid-template-columns: 1fr;
        }
        h2 {
          font-size: 0.8rem;
        }
        .data-table {
          font-size: 0.65rem;
        }
        .data-table th,
        .data-table td {
          padding: 0.2rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="panel">
        <div class="panel-content">
          <div class="header-flex">
            <div class="header-item">
              <span class="header-label">Hostname</span
              ><span class="header-value" id="hostname">—</span>
            </div>
            <div class="header-item">
              <span class="header-label">OS</span
              ><span class="header-value" id="os">—</span>
            </div>
            <div class="header-item">
              <span class="header-label">Uptime</span
              ><span class="header-value" id="uptime">—</span>
            </div>
            <div class="header-item">
              <span class="header-label">Load avg</span
              ><span class="header-value" style="color: #eab308" id="load"
                >—</span
              >
            </div>
            <div class="header-item" style="margin-left: auto">
              <span class="header-label">Time</span
              ><span class="header-value" id="timestamp">—</span>
            </div>
          </div>
        </div>
      </div>

      <div class="grid-cols-2">
        <div class="panel">
          <div class="panel-content">
            <div class="title-row">
              <h2>CPU</h2>
              <span class="header-value" id="cpu-total" style="margin: 0"
                >0.0%</span
              >
            </div>
            <div class="header-label" id="cpu-model" style="margin: 0">—</div>
            <pre id="cpu-ascii" class="ascii-pre"></pre>
          </div>
        </div>
        <div class="panel">
          <div class="panel-content">
            <h2>Memory & Swap</h2>
            <pre id="mem-ascii" class="ascii-pre"></pre>
            <pre id="swap-ascii" class="ascii-pre"></pre>
          </div>
        </div>
      </div>

      <div class="grid-cols-2">
        <div class="panel">
          <div class="panel-content">
            <h2>Filesystems</h2>
            <pre id="fs-ascii" class="ascii-pre"></pre>
          </div>
        </div>
        <div class="panel">
          <div class="panel-content">
            <h2>Disk I/O</h2>
            <div class="table-wrapper max-height-12">
              <table class="data-table">
                <thead>
                  <tr>
                    <th class="col-disk">Disk</th>
                    <th class="col-disk-read">Read</th>
                    <th class="col-disk-write">Write</th>
                  </tr>
                </thead>
                <tbody id="disk-io"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-content">
          <h2>Network Interfaces</h2>
          <div class="net-io-wrapper">
            <table class="data-table">
              <thead>
                <tr>
                  <th class="col-iface">Interface</th>
                  <th class="col-rx">RX</th>
                  <th class="col-tx">TX</th>
                  <th class="col-pkts-rx">Pkts RX</th>
                  <th class="col-pkts-tx">Pkts TX</th>
                  <th class="col-errs">Errs</th>
                  <th class="col-drop">Drop</th>
                </tr>
              </thead>
              <tbody id="net-io"></tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="panel" id="temps-section">
        <div class="panel-content">
          <h2>Temperatures</h2>
          <div class="table-wrapper">
            <table class="data-table">
              <thead>
                <tr>
                  <th class="col-sensor">Sensor</th>
                  <th class="col-temp">Temp °C</th>
                  <th class="col-high">High</th>
                  <th class="col-crit">Critical</th>
                </tr>
              </thead>
              <tbody id="temps"></tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-content">
          <h2>Top Processes</h2>
          <div class="table-wrapper max-height-20">
            <table class="data-table">
              <thead>
                <tr>
                  <th class="col-pid">PID</th>
                  <th class="col-user">User</th>
                  <th class="col-cpu">CPU%</th>
                  <th class="col-mem">MEM%</th>
                  <th class="col-rss">RSS</th>
                  <th class="col-thr">THR</th>
                  <th class="col-ni">NI</th>
                  <th class="col-status">S</th>
                  <th class="col-name">Name</th>
                </tr>
              </thead>
              <tbody id="procs"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <script src="/assets/bundle.js"></script>
  </body>
</html>
